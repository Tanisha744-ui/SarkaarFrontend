import{$ as u,Ab as T,Bb as I,Ea as i,Fa as p,Ia as y,Ja as b,Ka as x,R as a,Y as l,_a as C,ab as P,ea as g,fb as _,ha as f,hb as M,ia as t,ja as o,lb as v,mb as O,pb as w,sa as c,ua as h}from"./chunk-SFBDI3JS.js";function j(s,e){if(s&1&&(t(0,"div",11)(1,"div",12),i(2),o(),t(3,"div",13),i(4),o()()),s&2){let n=h();a(2),p(n.bannerBold),a(2),p(n.bannerMessage)}}var N=class s{constructor(e,n,r){this.route=e;this.router=n;this.partyService=r}playerName="";partyCodeInput="";showBanner=!1;bannerMessage="";bannerBold="";bannerTimeout;ngOnInit(){this.route.queryParams.subscribe(e=>{this.playerName=e.playerName||"",e.banner==="host-ended"&&(this.bannerBold="Game Ended",this.bannerMessage="The host has ended the game.",this.showBanner=!0,clearTimeout(this.bannerTimeout),this.bannerTimeout=setTimeout(()=>{this.showBanner=!1},5e3))})}hostParty(){if(!this.playerName){alert("Please enter your name before hosting.");return}this.partyService.createParty(this.playerName).subscribe({next:e=>{this.router.navigate(["/playfriends"],{queryParams:{partyCode:e.partyCode,hostName:e.hostName,playerName:this.playerName,isHost:!0}})},error:()=>alert("Failed to create party. Please try again.")})}joinParty(){if(!this.playerName||!this.partyCodeInput){this.bannerBold="Missing Info",this.bannerMessage="Please enter your name and party code.",this.showBanner=!0,clearTimeout(this.bannerTimeout),this.bannerTimeout=setTimeout(()=>{this.showBanner=!1},3500);return}this.partyService.joinParty(this.partyCodeInput,this.playerName).subscribe({next:e=>{e&&e.error?(this.bannerBold="Cannot Join",this.bannerMessage=e.error,this.showBanner=!0,clearTimeout(this.bannerTimeout),this.bannerTimeout=setTimeout(()=>{this.showBanner=!1},3500)):this.router.navigate(["/playfriends"],{queryParams:{partyCode:e.partyCode,hostName:e.hostName,playerName:this.playerName,isHost:!1}})},error:e=>{let n="Failed to join party. Please check the code and try again.";e&&e.error&&typeof e.error=="string"?n=e.error:e&&e.error&&e.error.error&&(n=e.error.error),this.bannerBold="Cannot Join",this.bannerMessage=n,this.showBanner=!0,clearTimeout(this.bannerTimeout),this.bannerTimeout=setTimeout(()=>{this.showBanner=!1},3500)}})}static \u0275fac=function(n){return new(n||s)(l(_),l(M),l(I))};static \u0275cmp=u({type:s,selectors:[["app-host-or-join"]],inputs:{playerName:"playerName"},decls:25,vars:3,consts:[["class","banner","role","alert","aria-live","assertive",4,"ngIf"],[1,"host-or-join"],[1,"cards-container"],[1,"card"],[1,"subtle"],[1,"host-button",3,"click"],[1,"join-input-container"],["type","text","placeholder","Enter Party Code",1,"party-code-input",3,"ngModelChange","ngModel"],[1,"join-button",3,"click"],[1,"playing-as"],[1,"player-name"],["role","alert","aria-live","assertive",1,"banner"],[1,"banner-title"],[1,"banner-subtitle"]],template:function(n,r){n&1&&(t(0,"h2"),i(1,"Multiplayer Tambola Game \u2013 Play Tambola Online with Friends"),o(),g(2,j,5,2,"div",0),t(3,"div",1)(4,"div",2)(5,"div",3)(6,"h3"),i(7,"Host a new Party"),o(),t(8,"p",4),i(9,"Create a new game room and invite your friends to play in real-time."),o(),t(10,"button",5),c("click",function(){return r.hostParty()}),i(11,"Host Game"),o()(),t(12,"div",3)(13,"h3"),i(14,"Join Party"),o(),t(15,"p",4),i(16,"Enter the Party Code from a friend to join their game."),o(),t(17,"div",6)(18,"input",7),x("ngModelChange",function(m){return b(r.partyCodeInput,m)||(r.partyCodeInput=m),m}),o(),t(19,"button",8),c("click",function(){return r.joinParty()}),i(20,"Join"),o()()()(),t(21,"p",9),i(22,"Playing as : "),t(23,"span",10),i(24),o()()()),n&2&&(a(2),f("ngIf",r.showBanner),a(16),y("ngModel",r.partyCodeInput),a(6),p(r.playerName))},dependencies:[T,v,O,w,P,C],styles:[".banner-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.08em}.banner-subtitle[_ngcontent-%COMP%]{color:#bbb;font-size:.98em;margin-top:2px}.banner[_ngcontent-%COMP%]{position:fixed;right:32px;bottom:32px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;background:#222;color:#fff;font-size:1rem;font-weight:500;border-radius:8px;box-shadow:0 4px 16px #0000001f;padding:14px 28px;min-width:280px;min-height:44px;letter-spacing:.2px;z-index:1000;animation:_ngcontent-%COMP%_fadeInBanner .4s;gap:2px}@keyframes _ngcontent-%COMP%_fadeInBanner{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}body[_ngcontent-%COMP%]{overflow:hidden}.host-or-join[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:200px}.cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:20px}.card[_ngcontent-%COMP%]{padding:30px;text-align:center;cursor:pointer;transition:transform .2s;width:350px;height:150px;background-color:#ffffff1a;border-radius:10px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}h2[_ngcontent-%COMP%]{text-align:center;margin-top:50px;margin-bottom:-50px}.subtle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin-top:-10px;margin-bottom:20px;text-align:center}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0%;color:#fff;font-size:1.5rem;margin-bottom:15px}.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px}.join-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;justify-content:center}.party-code-input[_ngcontent-%COMP%]{text-transform:uppercase;width:70%;padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:10px;box-sizing:border-box}.party-code-input[_ngcontent-%COMP%]::placeholder{text-transform:none}.join-input-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px;cursor:pointer;border:none;background-color:#007bff;color:#fff;border-radius:10px;transition:background-color .2s;margin-bottom:10px;margin-left:5px}.join-input-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.host-button[_ngcontent-%COMP%]{margin-top:5px}.player-name[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.2rem;color:#ccc;position:relative}.playing-as[_ngcontent-%COMP%]{margin-top:150px;text-align:center}"]})};export{N as HostOrJoinComponent};
